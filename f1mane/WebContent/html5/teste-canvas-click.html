<!doctype html>
<html>
<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style=" width:  100%; height: 100%; margin: 0px;">
    <canvas id="myCanvas" />
    <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
    <script language="JavaScript">
		var elem = document.getElementById('myCanvas'),
			elemLeft = elem.offsetLeft,
			elemTop = elem.offsetTop,
			context = elem.getContext('2d'),
			elements = [];

		// Add event listener for `click` events.
		
		var elemtoMover;
		
		elem.addEventListener('click', function(event) {
			var x = event.pageX - elemLeft,
				y = event.pageY - elemTop;

			// Collision detection between clicked offset and element.
			elements.forEach(function(element) {
				if (y > element.y && y < element.y + element.height 
					&& x > element.x && x < element.x + element.width) {
					elemtoMover = element;
					alert('clicked an element -> Chamar Ajax');
					$.ajax({
						url: "../rest/paddock/piloto",
						success: function(response) {
							alert('Retorno :'+response.nomeJogador);
						}, error: function (xhRequest, ErrorText, thrownError) {
							if(xhRequest.status==401 || xhRequest.status==400){
					    		alert('401');
					    	} else {
					    		alert(xhRequest.status);
					    	}
						}
					});					
					
				}
			});
			
			if(elemtoMover !=null ){
				elemtoMover.y = event.pageY;
				elemtoMover.x = event.pageX;
				render();
			}

		}, false);

		// Add element.
		elements.push({
			cor: '#BABACA',
			width: 150,
			height: 100,
			y: window.innerHeight/2 - 50,
			x: window.innerWidth/2 - 75
		});
		function render(){
			context.canvas.width  = window.innerWidth;
			context.canvas.height = window.innerHeight;
			// Render elements.
    		elements.forEach(function(element) {
				context.fillStyle = element.cor;
				context.fillRect(element.x, element.y, element.width, element.height);
			});
		}
		
		render();
    </script>

</body>
</html>