<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="width: 100%; height: 100%; margin: 0px;">
	<canvas id="myCanvas" />
	<script language="JavaScript">
		var elem = document.getElementById('myCanvas'),
			elemLeft = elem.offsetLeft,
			elemTop = elem.offsetTop,
			context = elem.getContext('2d'),
			elements = [];

		// Add event listener for `click` events.
		
		var elemtoMover;
		
		elem.addEventListener('click', function(event) {
			var x = event.pageX - elemLeft,
				y = event.pageY - elemTop;

			// Collision detection between clicked offset and element.
			elements.forEach(function(element) {
				if (y > element.y && y < element.y + element.height 
					&& x > element.x && x < element.x + element.width) {
					elemtoMover = element;
					alert('clicked an element -> Chamar Ajax');
					/*
					$.ajax({
						url: "../rest/teste/piloto",
						success: function(response) {
							alert('Retorno :'+response.nomeJogador);
						}, error: function (xhRequest, ErrorText, thrownError) {
							if(xhRequest.status==401 || xhRequest.status==400){
					    		alert('401');
					    	} else {
					    		alert(xhRequest.status);
					    	}
						}
					});					
					*/
				}
			});
			
			if(elemtoMover !=null ){
				elemtoMover.y = event.pageY;
				elemtoMover.x = event.pageX;
				render();
			}

		}, false);

		// Add element.
		elements.push({
			cor : '#BABACA',
			valor : 'GIRO_MIN',
			exibir : '1',
			centralizaTexto : true,
			tipo : 'controleMotor',
			width : 40,
			height : 40,
			evalY : 'window.innerHeight - 100;',
			y : window.innerHeight - 100,
			x : 10
		});
		elements.push({
			cor : '#BABACA',
			valor : 'GIRO_NOR',
			exibir : '2',
			tipo : 'controleMotor',
			centralizaTexto : true,
			width : 40,
			height : 40,
			evalY : 'window.innerHeight - 100;',
			y : window.innerHeight - 100,
			x : 60
		});
		elements.push({
			cor : '#BABACA',
			valor : 'GIRO_MAX',
			exibir : '3',
			tipo : 'controleMotor',
			centralizaTexto : true,
			width : 40,
			height : 40,
			evalY : 'window.innerHeight - 100;',
			y : window.innerHeight - 100,
			x : 110
		});
		
		elements.push({
			cor : '#BABACA',
			valor : 'AGRESSIVO',
			exibir : '3',
			tipo : 'controlePiloto',
			centralizaTexto : true,
			width : 40,
			height : 40,
			evalY : 'window.innerHeight - 100;',
			y : window.innerHeight - 100,
			evalX : 'window.innerWidth - 150;',
			x : 0
		});
		elements.push({
			cor : '#BABACA',
			valor : 'NORMAL',
			exibir : '2',
			centralizaTexto : true,
			tipo : 'controlePiloto',
			width : 40,
			height : 40,
			evalY : 'window.innerHeight - 100;',
			y : window.innerHeight - 100,
			evalX : 'window.innerWidth - 100;',
			x : 0
		});
		elements.push({
			cor : '#BABACA',
			valor : 'LENTO',
			exibir : '1',
			centralizaTexto : true,
			tipo : 'controlePiloto',
			width : 40,
			height : 40,
			evalY : 'window.innerHeight - 100;',
			y : window.innerHeight - 100,
			evalX : 'window.innerWidth - 50;',
			x : 0
		});
		elements.push({
			cor : '#BABACA',
			valor : 'E',
			exibir : 'E',
			tipo : 'Ers',
			centralizaTexto : true,
			width : 40,
			height : 40,
			evalY : 'window.innerHeight - 150;',
			y : window.innerHeight - 150,
			x : 10
		});
		elements.push({
			cor : '#BABACA',
			valor : 'D',
			exibir : 'D',
			tipo : 'Drs',
			centralizaTexto : true,
			width : 40,
			height : 40,
			evalY : 'window.innerHeight - 150;',
			y : window.innerHeight - 150,
			evalX : 'window.innerWidth - 50;',
			x : 0
		});
		//controles box
		elements.push({
			cor : '#BABACA',
			valor : 'BOX',
			exibir : 'BOX',
			tipo : 'Box',
			centralizaTexto : false,
			width : 80,
			height : 40,
			y : 10,
			evalX : '(window.innerWidth/2 - 40);',
			x : (window.innerWidth / 2 - 40)
		});	

		
		elements.push({
			cor : '#BABACA',
			valor : 'TIPO_PNEU_MOLE',
			exibir : 'M',
			tipo : 'Pneu',
			centralizaTexto : true,
			width : 40,
			height : 40,
			y : 60,
			evalX : '(window.innerWidth/2 - 80);',
			x : (window.innerWidth / 2 - 80)
		});
		elements.push({
			cor : '#BABACA',
			valor : 'TIPO_PNEU_DURO',
			exibir : 'D',
			tipo : 'Pneu',
			centralizaTexto : true,
			width : 40,
			height : 40,
			y : 60,
			evalX : '(window.innerWidth/2 - 20);',
			x : (window.innerWidth / 2 - 20)
		});
		elements.push({
			cor : '#BABACA',
			valor : 'TIPO_PNEU_CHUVA',
			exibir : 'C',
			tipo : 'Pneu',
			centralizaTexto : true,
			width : 40,
			height : 40,
			y : 60,
			evalX : '(window.innerWidth/2 + 40);',
			x : (window.innerWidth / 2 + 40)
		});		
				
		elements.push({
			cor : '#BABACA',
			valor : 'MAIS_ASA',
			exibir : '1',
			tipo : 'Asa',
			centralizaTexto : true,
			width : 40,
			height : 40,
			y : 110,
			evalX : '(window.innerWidth/2 - 80);',
			x : (window.innerWidth / 2 - 80)
		});
		elements.push({
			cor : '#BABACA',
			valor : 'ASA_NORMAL',
			exibir : '2',
			tipo : 'Asa',
			centralizaTexto : true,
			width : 40,
			height : 40,
			y : 110,
			evalX : '(window.innerWidth/2 - 20);',
			x : (window.innerWidth / 2 - 20)
		});
		elements.push({
			cor : '#BABACA',
			valor : 'MAIS_ASA',
			exibir : '3',
			tipo : 'Asa',
			centralizaTexto : true,
			width : 40,
			height : 40,
			y : 110,
			evalX : '(window.innerWidth/2 + 40);',
			x : (window.innerWidth / 2 + 40)
		});		
		

		elements.push({
			cor : '#BABACA',
			valor : '10',
			exibir : '-',
			tipo : 'Combustivel',
			centralizaTexto : true,
			width : 40,
			height : 40,
			y : 160,
			evalX : '(window.innerWidth/2 - 80);',
			x : (window.innerWidth / 2 - 80)
		});
		elements.push({
			cor : '#BABACA',
			valor : '',
			exibir : '100',
			tipo : 'Combustivel',
			centralizaTexto : false,
			width : 60,
			height : 40,
			y : 160,
			evalX : '(window.innerWidth/2 - 30);',
			x : (window.innerWidth / 2 - 30)
		});
		elements.push({
			cor : '#BABACA',
			valor : '10',
			exibir : '+',
			tipo : 'Combustivel',
			centralizaTexto : true,
			width : 40,
			height : 40,
			y : 160,
			evalX : '(window.innerWidth/2 + 40);',
			x : (window.innerWidth / 2 + 40)
		});		
		
		
		function render(){
			console.log('render()');
			context.canvas.width  = window.innerWidth;
			context.canvas.height = window.innerHeight;
			// Render elements.
    		elements.forEach(function(element) {
    			if(element.evalY){
    				element.y = eval(element.evalY);
    			}
    			if(element.evalX){
    				element.x = eval(element.evalX);
    			}
    			context.beginPath();
				context.strokeStyle = element.cor;
				context.rect(element.x, element.y, element.width, element.height);
				context.font='30px sans-serif';
				if(element.centralizaTexto){
					context.fillText(element.exibir,element.x+(element.width/2)-10,element.y+(element.height/2)+10);	
				}else{
					context.fillText(element.exibir,element.x+5,element.y+(element.height/2)+10);
				}
				
				context.stroke();
			});
		}
		
		var main = setInterval(render, 500);
    </script>

</body>
</html>